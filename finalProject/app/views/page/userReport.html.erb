<h2>Student Report</h2>

<h3>Completed Courses</h3>
<table>
    <tr>
        <th>Catalog Number</th>
        <th>Description</th>
    </tr>

    <% @DegreeProgress.each do |degree| %>
        <% if degree.user_id == @report.id%>
            <% @Mappings.each do |mapping| %>
                <% if mapping.degree_id == degree.degree_id %>
                    <% check = false %>
                    <% @Finished.each do |finished| %>
                        <% if @report.id == finished.user_id && finished.course_id == mapping.course_id%>
                            <% check = true %>
                        <%end%>
                    <% end %>
                    <% if check %>
                        <% @Courses.each do |course| %>
                        <% if course.id ==  mapping.course_id %>
                                <tr>
                                <td><%= course.subCat %></td>
                                <td><%= course.title %></td>
                                </tr>
                            <%end%>
                        <%end%>
                    <% end %>
                <%end%>
            <%end%>
        <%end%>
    <%end%>

</table>

<h3>Incomplete Courses</h3>
<table>
    <tr>
        <th>Catalog Number</th>
        <th>Description</th>
    </tr>


    <% @DegreeProgress.each do |degree| %>
        <% if degree.user_id == @report.id %>
            <% @Mappings.each do |mapping| %>
                <% if mapping.degree_id == degree.degree_id %>
                    <% check = false %>
                    <% @Finished.each do |finished| %>
                        <% if @report.id == finished.user_id && finished.course_id == mapping.course_id%>
                            <% check = true %>
                        <%end%>
                    <% end %>
                    <% if !check %>
                        <% @Courses.each do |course| %>
                        <% if course.id ==  mapping.course_id %>
                                <tr>
                                <td><%= course.subCat %></td>
                                <td><%= course.title %></td>
                                </tr>
                            <%end%>
                        <%end%>
                    <% end %>
                <%end%>
            <%end%>
        <%end%>
    <%end%>

</table>

<form action="/page/adminReport">
    <div>
        <button>Back to All Reports</button>
    </div>
</form>